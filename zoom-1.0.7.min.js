function h(b,a){return[b*a[0],b*a[1]]}function l(b,a){return[b[0]+a[0],b[1]+a[1]]}function m(b,a){return[b[0]-a[0],b[1]-a[1]]}function n(b,a){return b[0]*a[0]+b[1]*a[1]}function q(b,a){return l(h(a[0],b[0]),h(a[1],b[1]))}function r(b,a){this.a=b;this.c=a}var t=new r([[1,0],[0,1]],[0,0]);function u(b){var a={pan:!1,rotate:!0},c={};b=void 0==b?c:b;for(k in a)c=b[k],b[k]=void 0==c?a[k]:c;return b}
function v(b,a,c){function g(b){return function(a){a.preventDefault();if(d.j)return!1;a=a.touches;if(!a)return!1;b(a)}}function e(a){var d=a[0].pageX-b.offsetLeft;a=a[0].pageY-b.offsetTop;return[[d,a],[d+1,a+1]]}function p(a){var d=b.offsetLeft,c=b.offsetTop;return[[a[0].pageX-d,a[0].pageY-c],[a[1].pageX-d,a[1].pageY-c]]}this.b=null;this.j=!1;this.o=0;this.u=b;this.g=this.h=t;this.l=[0,0];this.i=[0,0];var d=this;this.s=u(a);this.f=c||window;b.style["transform-origin"]="0 0";a=g(function(a){var b=
a.length;if(b!=d.o)d.o=b,d.h=d.g,0!=b&&(d.l=1<a.length?p(a):e(a),d.i=d.l);else{d.i=1<a.length?p(a):e(a);a=d.l;var b=d.i,c=m(a[1],a[0]),g=m(b[1],b[0]),f;if(d.s.rotate){var w=n(c,c);f=n(c,g)/w;c=(c[0]*g[1]-c[1]*g[0])/w;f=[[f,c],[-c,f]]}else f=Math.sqrt(n(g,g))/Math.sqrt(n(c,c)),f=[[f,0],[-0,f]];a=new r(f,m(b[0],q(f,a[0])));b=d.h;f=a.a;c=b.a;d.g=new r([q(f,c[0]),q(f,c[1])],l(q(a.a,b.c),a.c));x(d)}});b.parentNode.addEventListener("touchstart",g(function(a){1===a.length&&(null!=d.b?(d.f.clearTimeout(d.b),
d.m(),d.b=null):d.b=d.f.setTimeout(function(){d.b=null},300))}));b.parentNode.addEventListener("touchstart",a);b.parentNode.addEventListener("touchmove",a);b.parentNode.addEventListener("touchend",a)}function y(b,a){b.g=a;x(b)}function x(b){var a=b.g,c=a.a,a=a.c;b.u.style.transform="matrix("+c[0][0]+","+c[0][1]+","+c[1][0]+","+c[1][1]+","+a[0]+","+a[1]+")"}
v.prototype.m=function(){if(this.f.requestAnimationFrame){this.j=!0;var b=this.h,a=null,c=this,g=function(e){a||(a=e);e=(e-a)/1E3;if(1<=e)y(c,t),c.j=!1;else{var p=b.a,d=t.a;y(c,new r([l(h(1-e,p[0]),h(e,d[0])),l(h(1-e,p[1]),h(e,d[1]))],l(h(1-e,b.c),h(e,t.c))));c.f.requestAnimationFrame(g)}};this.f.requestAnimationFrame(g)}else y(c,t)};v.prototype.reset=v.prototype.m;"undefined"===typeof exports?window.Zoom=v:exports.Zoom=v;
